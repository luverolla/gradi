# RAD - REST API Documentation

This document illustrates application's RESTful endpoints, how to access them,
how to build requests, and how to process responses; in order to build client
applications with ease.

## RESTful API structure

All endpoints URLs follow the `{domain}/api/{path}` wildcard, where `${domain}` is
the address, or hostname, at which the given GRADI installation can be reached;
and `{path}` is the chosen endpoint.

From this point, the document will refer to the first URL above just as `/api`.

There are three categories of endpoints:
* __Public endpoints__: reachable at `/api/public/{path}`, accessible by everyone
  inside, or outside, the platform and requires no authentication.
* __User endpoints__: reachable at `/api/user/{path}`, accessible by every
  registered user, requires authentication.
* __Admin endpoints__: reachable at `/api/admin/{path}`, accessible only by
  system's administrator, and, as obvious, requires authentication.

All requests can throw `404 Not Found`, if requested resource cannot be found,
or `403 Forbidden` if current user isn't authenticated or authorized.

Each endpoint is described as follows:
```
METHOD /path/to/endpoint

{} : RequestBodyType (or [] : RequestBodyType)

{} : ResponseBodyType (or [] : ResponseBodyType)
```

## Admin endpoints

### getUsers

Retrieves all users matching the ()[EntitySetRequest]'s object given as request body.

```http request
GET /api/admin/users

{} : EntitySetRequest

[] : User[]
```

### getUser

Retrieve the user, whose code is passed as URL parameter. Request's body is ignored.

```http request
GET /api/users/{code}

<no request body>

{} : User
```

### addUsers

Adds new users to the database. Users' data is passed as request body except for the
`code` field, that is overwritten by software's procedure. Response body contains
the same user data, with codes and dates generated by server.

```http request
POST /api/admin/users

[] : User[]

[] : User[]
```

### updateUser

Update the user, whose code is passed as URL parameter, with new details passed
as request's body. However, only some details are updated. Refer to SSD.
Response's body contains updated user's data.

```http request
PUT /api/admin/users/{code}

{} : User

{} : User
```

### deleteUser

Deletes the user, whose code is passed as URL parameter. Request body is ignored.
In case of success, the server responds with `204 No Content` status,
since response's body is empty.

```http request
DELETE /api/admin/users/{code}

<no request body>

<no response body>
```